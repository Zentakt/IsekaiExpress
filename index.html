<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isekai Express</title>
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        :root {
            --neon-pink: #ec4899;
            --electric-blue: #38bdf8;
            --glass-bg: rgba(30, 34, 54, 0.7);
            --glass-border: rgba(236,72,153,0.4);
            --dark-bg: #181926;
            --gradient-1: linear-gradient(90deg, #ec4899 0%, #38bdf8 100%);
            --gradient-2: linear-gradient(90deg, #a78bfa 0%, #38bdf8 100%);
            --gradient-3: linear-gradient(90deg, #f472b6 0%, #38bdf8 100%);
            --gradient-4: linear-gradient(90deg, #f472b6 0%, #818cf8 100%);
            --road-gradient: linear-gradient(180deg, #1a202c 0%, #2d3748 50%, #1a202c 100%);
        }
        body {
            font-family: 'Noto Sans JP', 'Orbitron', sans-serif;
            background: linear-gradient(135deg, #181926 0%, #232946 100%);
            color: white;
            overflow-x: hidden;
            cursor: none;
            min-height: 100vh;
        }
        .anime-bg {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 0;
            pointer-events: none;
            background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1500&q=80') center/cover no-repeat, linear-gradient(135deg, #232946cc 0%, #181926ee 100%);
            opacity: 0.5;
            animation: bgmove 30s linear infinite alternate;
        }
        @keyframes bgmove {
            0% { background-position: 50% 0, 0 0; }
            100% { background-position: 50% 100px, 0 0; }
        }
        .sakura-petal {
            position: absolute;
            width: 24px; height: 24px;
            pointer-events: none;
            z-index: 2;
            background: url('https://svgshare.com/i/12Vn.svg') no-repeat center/contain;
            opacity: 0.7;
            animation: petal-float 8s linear infinite;
        }
        @keyframes petal-float {
            0% { transform: translateY(-40px) rotate(0); opacity: 0; }
            10% { opacity: 0.7; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }
        .hero-glass {
            margin: 0 auto; margin-top: 6vh;
            max-width: 650px;
            padding: 3rem 2.5rem 2.5rem 2.5rem;
            border-radius: 2.5rem;
            background: var(--glass-bg);
            border: 2.5px solid var(--glass-border);
            box-shadow: 0 8px 40px 0 #ec489955, 0 1.5px 12px 0 #38bdf855;
            backdrop-filter: blur(18px);
            position: relative;
            z-index: 3;
            overflow: hidden;
            transition: box-shadow 0.3s;
        }
        .hero-glass::before {
            content: '';
            position: absolute;
            left: 10%; top: 0; width: 80%; height: 100%;
            background: radial-gradient(circle at 60% 30%, #ec489966 0%, transparent 80%);
            z-index: 1;
            pointer-events: none;
        }
        .hero-title {
            font-family: 'Orbitron', 'Noto Sans JP', sans-serif;
            font-size: 3.2rem;
            font-weight: 700;
            letter-spacing: 0.06em;
            text-align: center;
            color: var(--electric-blue);
            text-shadow: 0 2px 24px #38bdf8cc, 0 0 4px #ec4899cc;
            margin-bottom: 0.6rem;
            animation: neon-flicker 2.5s linear infinite alternate;
        }
        @keyframes neon-flicker {
            0%, 100% { opacity: 1; text-shadow: 0 2px 24px #38bdf8cc, 0 0 4px #ec4899cc; }
            10% { opacity: 0.98; }
            20% { opacity: 0.95; text-shadow: 0 2px 20px #ec4899cc, 0 0 7px #38bdf8cc; }
            30% { opacity: 1; }
            40% { opacity: 0.93; }
            50% { opacity: 1; }
            60% { opacity: 0.97; }
            70% { opacity: 1; }
            80% { opacity: 0.95; }
            90% { opacity: 1; }
        }
        .hero-desc {
            font-size: 1.2rem;
            text-align: center;
            color: #e0e6f7;
            margin-bottom: 2.2rem;
            letter-spacing: 0.03em;
        }
        .hero-cta {
            display: flex; justify-content: center; align-items: center;
            margin-top: 1.2rem;
        }
        .hero-btn {
            font-family: 'Orbitron', 'Noto Sans JP', sans-serif;
            font-size: 1.1rem;
            letter-spacing: 0.08em;
            font-weight: 700;
            padding: 1.1rem 2.5rem;
            border-radius: 2rem;
            border: none;
            background: var(--gradient-1);
            color: #fff;
            box-shadow: 0 0 16px 4px #ec489988;
            cursor: pointer;
            transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
            outline: none;
            position: relative;
            z-index: 2;
            overflow: hidden;
            animation: btn-glow 2.5s infinite alternate;
        }
        .hero-btn:hover {
            background: var(--gradient-2);
            transform: scale(1.06) rotate(-1deg);
            box-shadow: 0 0 28px 8px #38bdf8cc, 0 0 0 2px #ec4899cc;
        }
        @keyframes btn-glow {
            0% { box-shadow: 0 0 16px 4px #ec489988; }
            100% { box-shadow: 0 0 32px 8px #38bdf8cc, 0 0 0 2px #ec4899cc; }
        }
            /* Scroll Reveal */
        .reveal {opacity:0; transform: translateY(40px) scale(0.95); transition: opacity 0.8s ease-out, transform 0.8s ease-out;}
        .reveal.in-view {opacity:1; transform: translateY(0) scale(1);} 
        /* Speed Lines Layer */
        .speed-lines {position: fixed; top:0; left:0; width:100%; height:100%; z-index:1; pointer-events:none; background: repeating-linear-gradient(120deg, transparent 0 10px, rgba(56,189,248,.15) 10px 20px); animation: speedMove 3s linear infinite;} 
        @keyframes speedMove {0% {background-position:0 0;} 100% {background-position:1000px 600px;}} 
        /* Cursor Sparkle */
        .sparkle {position: fixed; width:6px; height:6px; border-radius:50%; pointer-events:none; background: radial-gradient(circle, var(--electric-blue) 0%, transparent 70%); opacity:0.9; animation: sparkleFade 0.6s forwards;} 
        @keyframes sparkleFade {to {transform: scale(1.8); opacity:0;}} 
</style>
</head>
<body>
    <div class="anime-bg"></div>
    <div class="speed-lines"></div>
    <!-- Sakura petals (will be animated by JS) -->
    <div id="sakura-petals"></div>
<script>
// Sakura Petal Animation
function randomBetween(a, b) { return a + Math.random() * (b - a); }
function createSakuraPetal() {
    const petal = document.createElement('div');
    petal.className = 'sakura-petal';
    petal.style.left = randomBetween(0, 100) + 'vw';
    petal.style.animationDuration = randomBetween(7, 14) + 's';
    petal.style.opacity = randomBetween(0.5, 0.9);
    petal.style.transform = `scale(${randomBetween(0.7, 1.2)}) rotate(${randomBetween(-20, 20)}deg)`;
    document.getElementById('sakura-petals').appendChild(petal);
    setTimeout(() => petal.remove(), 15000);
}
setInterval(createSakuraPetal, 600);
for(let i=0;i<12;i++) setTimeout(createSakuraPetal, i*400);
</script>
    <div class="road-container"></div>
    <div id="cursor"></div>
    <div id="speechBubble" class="speech-bubble"></div>

    <!-- HERO SECTION -->
    <section class="section hero-section">
        <div class="hero-glass">
            <h1 class="hero-title">Isekai Express</h1>
            <div class="hero-desc">Unite Anime Lovers Across Virtual Europe</div>
            <div class="hero-cta">
                <button class="hero-btn">Begin Your Journey</button>
            </div>
        </div>
    </section>

    <!-- COMMUNITY FEATURES -->
    <section class="section community-section">
        <div class="container">
            <h2 class="section-title">Why Join?</h2>
            <div class="community-grid">
                <div class="community-card">
                    <div class="card-icon">🚛</div>
                    <div class="card-title">Professional Driving</div>
                    <div class="card-description">Experience realistic trucking with fellow anime enthusiasts. High standards, friendly and welcoming.</div>
                </div>
                <div class="community-card">
                    <div class="card-icon">🎎</div>
                    <div class="card-title">Anime Culture</div>
                    <div class="card-description">Share your favorite series, discuss episodes, and join anime-themed convoys and events.</div>
                </div>
                <div class="community-card">
                    <div class="card-icon">🎉</div>
                    <div class="card-title">Community Events</div>
                    <div class="card-description">Regular convoys, competitions, and social gatherings. Always something happening!</div>
                </div>
            </div>
        </div>
    </section>

    <!-- FEATURED ROUTES -->
    <section class="section routes-section">
        <div class="container">
            <h2 class="section-title">Featured Routes</h2>
            <div class="routes-grid">
                <div class="route-card">
                    <div class="route-name">Tokyo Express</div>
                    <div class="route-distance">Berlin → Warsaw (573 km)</div>
                    <div class="route-description">Signature route connecting two capitals. Long-distance hauling, anime chats.</div>
                </div>
                <div class="route-card">
                    <div class="route-name">Sakura Circuit</div>
                    <div class="route-distance">Paris → Lyon → Marseille (863 km)</div>
                    <div class="route-description">Spring convoys through France's countryside. Hanami season together!</div>
                </div>
                <div class="route-card">
                    <div class="route-name">Nordic Adventure</div>
                    <div class="route-distance">Stockholm → Oslo → Copenhagen (1,247 km)</div>
                    <div class="route-description">Winter anime spirit: snow, mountains, vistas, and brave drivers.</div>
                </div>
                <div class="route-card">
                    <div class="route-name">Mediterranean Dream</div>
                    <div class="route-distance">Rome → Naples → Palermo (934 km)</div>
                    <div class="route-description">Scenic beauty, coastal roads, and slice-of-life anime fans unite!</div>
                </div>
                <div class="route-card">
                    <div class="route-name">Alpine Quest</div>
                    <div class="route-distance">Munich → Zurich → Milan (512 km)</div>
                    <div class="route-description">Mountain passes, breathtaking scenery, and adventure anime favorites.</div>
                </div>
                <div class="route-card">
                    <div class="route-name">Eastern Expedition</div>
                    <div class="route-distance">Prague → Budapest → Bucharest (1,156 km)</div>
                    <div class="route-description">Hidden gems, isekai adventures, and fantasy worlds with convoy partners.</div>
                </div>
            </div>
        </div>
    </section>
    <!-- Floating Navigation -->
    <nav class="floating-nav">
        <div class="nav-dot active" data-section="hero" data-label="Home"></div>
        <div class="nav-dot" data-section="about" data-label="About"></div>
        <div class="nav-dot" data-section="routes" data-label="Routes"></div>
        <div class="nav-dot" data-section="join" data-label="Join"></div>
    </nav>
    <!-- About Section -->
    <section id="about" class="about section">
        <div class="morphing-bg"></div>
        <!-- ... -->
        <div class="sakura-container" id="sakuraContainer"></div>
        <div class="container">
            <h2 class="section-title">Our Story</h2>
            <div class="story-content">
                <p>Welcome to <span class="story-highlight">Isekai Express</span>, where the worlds of trucking and anime collide in perfect harmony. Born from a shared passion for both the open road and captivating anime stories, our VTC has become a haven for drivers who appreciate the finer things in virtual life.</p>
                
                <p>Like protagonists in our favorite anime series, we embark on epic journeys across Europe, building friendships that transcend borders and creating memories that last a lifetime. Every route is an adventure, every delivery a chapter in our collective story.</p>
                
                <p>Join us as we transport goods and dreams across the digital highways of Euro Truck Simulator 2, where <span class="story-highlight">every mile driven is a mile toward bringing the anime community together</span>.</p>
            </div>
            
            <div class="community-grid">
                <div class="community-card">
                    <div class="card-icon">🚛</div>
                    <h3 class="card-title">Professional Driving</h3>
                    <p class="card-description">Experience realistic trucking with fellow anime enthusiasts. We maintain high standards while keeping the atmosphere friendly and welcoming.</p>
                </div>
                
                <div class="community-card">
                    <div class="card-icon">🎌</div>
                    <h3 class="card-title">Anime Culture</h3>
                    <p class="card-description">Share your favorite series, discuss latest episodes, and participate in anime-themed convoys and events throughout the year.</p>
                </div>
                
                <div class="community-card">
                    <div class="card-icon">👥</div>
                    <h3 class="card-title">Community Events</h3>
                    <p class="card-description">Regular convoys, competitions, and social gatherings. From seasonal festivals to anime convention meetups, there's always something happening.</p>
                </div>
            </div>
        </div>
        <div class="section-transition"></div>
    </section>

    <!-- Routes Section -->
    <section id="routes" class="routes section">
        <div class="morphing-bg"></div>
        <div class="route-network" id="routeNetwork"></div>
        <div class="container">
            <h2 class="section-title">Featured Routes</h2>
            <div class="routes-grid">
                <div class="route-card">
                    <h3 class="route-name">Tokyo Express</h3>
                    <div class="route-distance">Berlin → Warsaw (573 km)</div>
                    <p class="route-description">Our signature route connecting two major European capitals. Experience the thrill of long-distance hauling while discussing your favorite anime series with fellow drivers.</p>
                </div>
                
                <div class="route-card">
                    <h3 class="route-name">Sakura Circuit</h3>
                    <div class="route-distance">Paris → Lyon → Marseille (863 km)</div>
                    <p class="route-description">A scenic journey through France's beautiful countryside. Perfect for spring convoys when we celebrate hanami season together.</p>
                </div>
                
                <div class="route-card">
                    <h3 class="route-name">Nordic Adventure</h3>
                    <div class="route-distance">Stockholm → Oslo → Copenhagen (1,247 km)</div>
                    <p class="route-description">Embrace the winter anime spirit on this challenging Nordic route. Snow, mountains, and stunning vistas await brave drivers.</p>
                </div>
                
                <div class="route-card">
                    <h3 class="route-name">Mediterranean Dream</h3>
                    <div class="route-distance">Rome → Naples → Palermo (934 km)</div>
                    <p class="route-description">Coastal roads and historic cities make this route perfect for slice-of-life anime fans who appreciate scenic beauty and cultural heritage.</p>
                </div>
                
                <div class="route-card">
                    <h3 class="route-name">Alpine Quest</h3>
                    <div class="route-distance">Munich → Zurich → Milan (512 km)</div>
                    <p class="route-description">Challenge yourself with mountain passes and breathtaking Alpine scenery. A favorite among fans of adventure anime series.</p>
                </div>
                
                <div class="route-card">
                    <h3 class="route-name">Eastern Expedition</h3>
                    <div class="route-distance">Prague → Budapest → Bucharest (1,156 km)</div>
                    <p class="route-description">Discover Eastern Europe's hidden gems while discussing isekai adventures and fantasy worlds with your convoy partners.</p>
                </div>
            </div>
        </div>
        <div class="section-transition"></div>
    </section>

    <!-- Join Section -->
    <section id="join" class="join section">
        <div class="morphing-bg"></div>
        <div class="matrix-rain" id="matrixRain"></div>
        <div class="container">
            <h2 class="section-title">Join Our Guild</h2>
            <div class="story-content">
                <p>Ready to begin your isekai adventure with us? Join a community where your love for anime and trucking comes together. Fill out the form below to start your application process.</p>
            </div>
            
            <form class="join-form" id="joinForm">
                <div class="form-group">
                    <label class="form-label" for="truckersmpId">TruckersMP ID</label>
                    <input type="text" class="form-input" id="truckersmpId" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="discordUsername">Discord Username</label>
                    <input type="text" class="form-input" id="discordUsername" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="favoriteAnime">Favorite Anime</label>
                    <input type="text" class="form-input" id="favoriteAnime" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="experience">ETS2 Experience</label>
                    <select class="form-input" id="experience" required>
                        <option value="">Select your experience level</option>
                        <option value="beginner">New to trucking (0-100 hours)</option>
                        <option value="intermediate">Experienced driver (100-500 hours)</option>
                        <option value="veteran">Veteran trucker (500+ hours)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="message">Why do you want to join Isekai Express?</label>
                    <textarea class="form-input" id="message" rows="4" placeholder="Tell us about your passion for anime and trucking..."></textarea>
                </div>
                
                <button type="submit" class="submit-btn">Submit Application</button>
            </form>
        </div>
        <div class="section-transition"></div>
    </section>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTop">↑</button>

    <script>
        // Initialize variables
        let scrollSpeed = 0;
        let lastScrollY = 0;
        let animationFrame;
        
        // Speech bubble messages
        const speechMessages = [
            "Konnichiwa! 🌸",
            "Ready for adventure?",
            "Ganbatte! 💪",
            "Sugoi desu ne! ✨",
            "Let's go trucking! 🚛",
            "Anime wa saikou! 🎌",
            "Join our convoy! 🛣️",
            "Kawaii cursor desu! 💕"
        ];

        // Loading screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                startAnimations();
            }, 3000);
        });

        // Custom cursor functionality
        const cursor = document.getElementById('cursor');
        const speechBubble = document.getElementById('speechBubble');
        
        let speechTimeout;
        
        // Cursor logic – store last mouse position for scroll sync
        let lastCursorX = window.innerWidth / 2;
        let lastCursorY = window.innerHeight / 2;
        function clamp(val, min, max) { return Math.max(min, Math.min(max, val)); }
        document.addEventListener('mousemove', (e) => {
            // Clamp to viewport
            let x = clamp(e.clientX, 0, window.innerWidth - 36);
            let y = clamp(e.clientY, 0, window.innerHeight - 36);
            cursor.style.left = (x - 20) + 'px';
            cursor.style.top  = (y - 20) + 'px';
            cursor.style.display = 'block';
            lastCursorX = x;
            lastCursorY = y;
            // Speech bubble
            let sx = clamp(e.clientX - 75, 0, window.innerWidth - 150);
            let sy = clamp(e.clientY - 60, 0, window.innerHeight - 40);
            speechBubble.style.left = sx + 'px';
            speechBubble.style.top = sy + 'px';
        });
        // On scroll, reapply cursor position
        document.addEventListener('scroll', () => {
            cursor.style.left = (lastCursorX - 20) + 'px';
            cursor.style.top  = (lastCursorY - 20) + 'px';
            cursor.style.display = 'block';
        });
        // Hide cursor if mouse leaves window
        document.addEventListener('mouseleave', () => {
            cursor.style.display = 'none';
        });

        // Show speech bubble on hover over interactive elements
        document.querySelectorAll('a, button, .community-card, .route-card').forEach(element => {
            element.addEventListener('mouseenter', () => {
                const randomMessage = speechMessages[Math.floor(Math.random() * speechMessages.length)];
                speechBubble.textContent = randomMessage;
                speechBubble.classList.add('show');
                
                clearTimeout(speechTimeout);
                speechTimeout = setTimeout(() => {
                    speechBubble.classList.remove('show');
                }, 2000);
            });
            
            element.addEventListener('mouseleave', () => {
                clearTimeout(speechTimeout);
                speechTimeout = setTimeout(() => {
                    speechBubble.classList.remove('show');
                }, 300);
            });
        });

        // Scroll tracking and dashboard updates
        function updateScrollMetrics() {
            const currentScrollY = window.scrollY;
            const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
            
            // Calculate scroll speed
            scrollSpeed = Math.abs(currentScrollY - lastScrollY);
            lastScrollY = currentScrollY;
            
            // Update speedometer
            const displaySpeed = Math.min(Math.round(scrollSpeed * 2), 99);
            document.getElementById('speedDisplay').textContent = displaySpeed;
            
            // Update progress bar
            const progress = (currentScrollY / maxScroll) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update road animation speed
            const roadSurface = document.querySelector('.road-surface');
            const roadLines = document.querySelector('.road-lines');
            
            if (scrollSpeed > 0) {
                roadSurface.style.animationDuration = Math.max(0.05, 0.2 - scrollSpeed * 0.01) + 's';
                roadLines.style.animationDuration = Math.max(0.5, 2 - scrollSpeed * 0.1) + 's';
            }
        }

        // Scroll event listener
        window.addEventListener('scroll', () => {
            updateScrollMetrics();
            updateActiveSection();
            toggleScrollTopButton();
        });

        // Floating navigation
        function updateActiveSection() {
            const sections = document.querySelectorAll('.section');
            const navDots = document.querySelectorAll('.nav-dot');
            
            let currentSection = '';
            const scrollPos = window.scrollY + window.innerHeight / 2;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                
                if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                    currentSection = section.id;
                }
            });
            
            navDots.forEach(dot => {
                dot.classList.remove('active');
                if (dot.dataset.section === currentSection) {
                    dot.classList.add('active');
                }
            });
        }

        // Navigation clicks
        document.querySelectorAll('.nav-dot').forEach(dot => {
            dot.addEventListener('click', () => {
                const targetSection = document.getElementById(dot.dataset.section);
                targetSection.scrollIntoView({ behavior: 'smooth' });
                
                // Trigger transformation effect
                const transition = targetSection.querySelector('.section-transition');
                transition.classList.add('active');
                setTimeout(() => {
                    transition.classList.remove('active');
                }, 1000);
            });
        });

        // Scroll to top button
        function toggleScrollTopButton() {
            const scrollTop = document.getElementById('scrollTop');
            if (window.scrollY > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        }

        document.getElementById('scrollTop').addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Audio system (placeholder - you'll need to add your actual audio files)
        let isPlaying = false;
        const playButton = document.getElementById('playButton');
        
        playButton.addEventListener('click', () => {
            isPlaying = !isPlaying;
            playButton.textContent = isPlaying ? '⏸️' : '▶️';
            
            // Add your audio playback logic here
            // For now, just animate the visualizer
            const audioBars = document.querySelectorAll('.audio-bar');
            audioBars.forEach(bar => {
                if (isPlaying) {
                    bar.style.animationPlayState = 'running';
                } else {
                    bar.style.animationPlayState = 'paused';
                }
            });
        });

        // Form submission
        document.getElementById('joinForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get form data
            const formData = {
                truckersmpId: document.getElementById('truckersmpId').value,
                discordUsername: document.getElementById('discordUsername').value,
                favoriteAnime: document.getElementById('favoriteAnime').value,
                experience: document.getElementById('experience').value,
                message: document.getElementById('message').value
            };
            
            // Simulate form submission
            alert('Application submitted! We\'ll contact you on Discord soon. Arigatou gozaimasu! 🌸');
            
            // Reset form
            document.getElementById('joinForm').reset();
        });

        // Smooth scrolling for CTA button
        document.querySelector('.cta-button').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('join').scrollIntoView({ behavior: 'smooth' });
        });

        // Start animations after loading
        function startAnimations() {
            // Create sakura petals
            createSakuraPetals();
            
            // Create speed lines
            createSpeedLines();
            
            // Create network visualization
            createNetworkVisualization();
            
            // Create matrix rain
            createMatrixRain();
        }

        // Initialize all core systems
        function initializeSystems() {
            // Initialize particle systems
            function createSakuraPetals() {
                const container = document.getElementById('sakuraContainer');
                if (!container) return;
                
                const petalCount = 15;
                
                for (let i = 0; i < petalCount; i++) {
                    const petal = document.createElement('div');
                    petal.className = 'sakura-petal';
                    petal.style.left = `${Math.random() * 100}%`;
                    petal.style.animationDuration = `${5 + Math.random() * 10}s`;
                    petal.style.animationDelay = `-${Math.random() * 5}s`;
                    container.appendChild(petal);
                }
            }
            
            function initializeParticleSystems() {
                return {
                    sakura: createSakuraPetals,
                    matrix: createMatrixRain,
                    network: createNetworkVisualization,
                    speedLines: createSpeedLines
                };
            }

            function createMatrixRain() {
                const container = document.getElementById('matrixRain');
                if (!container) return;
                
                const columns = Math.floor(window.innerWidth / 20);
                
                for (let i = 0; i < columns; i++) {
                    const drop = document.createElement('div');
                    drop.className = 'matrix-drop';
                    drop.style.left = `${(i * 20)}px`;
                    drop.style.animationDelay = `${Math.random() * 5}s`;
                    container.appendChild(drop);
                }
            }

            function createNetworkVisualization() {
                const container = document.getElementById('routeNetwork');
                if (!container) return;
                
                const nodeCount = 8;
                const connectionCount = 15;
                
                // Create nodes
                for (let i = 0; i < nodeCount; i++) {
                    const node = document.createElement('div');
                    node.className = 'network-node';
                    node.style.left = `${10 + Math.random() * 80}%`;
                    node.style.top = `${10 + Math.random() * 80}%`;
                    container.appendChild(node);
                }
                
                // Create connections
                for (let i = 0; i < connectionCount; i++) {
                    const connection = document.createElement('div');
                    connection.className = 'network-connection';
                    container.appendChild(connection);
                }
            }

            function createSpeedLines() {
                const container = document.querySelector('.hero');
                if (!container) return;
                
                const lineCount = 20;
                
                for (let i = 0; i < lineCount; i++) {
                    const line = document.createElement('div');
                    line.className = 'speed-line';
                    line.style.left = `${Math.random() * 100}%`;
                    line.style.animationDuration = `${0.5 + Math.random() * 1.5}s`;
                    container.appendChild(line);
                }
            }

            // Error handling system
            const errorSystem = {
                handleError: (error, context = '') => {
                    console.error(`Error in ${context}:`, error);
                    // You could add error reporting to a service here
                },
                isSupported: (feature) => {
                    try {
                        return !!window[feature];
                    } catch (e) {
                        return false;
                    }
                }
            };
            
            try {

            // Initialize audio system
            const audioSystem = {
                init: () => {
                    try {
                        const AudioContext = window.AudioContext || window.webkitAudioContext;
                        if (!AudioContext) {
                            throw new Error('Web Audio API not supported');
                        }
                        return new AudioContext();
                    } catch (error) {
                        errorSystem.handleError(error, 'Audio System');
                        return null;
                    }
                }
            };

            // Initialize performance monitoring
            let lastFrameTime = performance.now();
            const fpsMonitor = setInterval(() => {
                const currentTime = performance.now();
                const delta = currentTime - lastFrameTime;
                if (delta > 50) { // Frame time > 50ms (< 20 FPS)
                    console.warn('Performance warning: Frame time:', delta.toFixed(2), 'ms');
                }
                lastFrameTime = currentTime;
            }, 1000);

            // Initialize scroll manager
            const scrollManager = {
                init: () => {
                    let scrollTimeout;
                    const handleScroll = () => {
                        clearTimeout(scrollTimeout);
                        scrollTimeout = setTimeout(() => {
                            updateScrollMetrics();
                            updateActiveSection();
                            toggleScrollTopButton();
                        }, 10);
                    };
                    
                    window.addEventListener('scroll', handleScroll, { passive: true });
                    
                    // Initial call
                    handleScroll();
                    
                    // Return cleanup function
                    return () => {
                        window.removeEventListener('scroll', handleScroll);
                        clearTimeout(scrollTimeout);
                    };
                }
            };

            // Initialize responsive layout manager
            const layoutManager = {
                init: () => {
                    const updateLayout = () => {
                        // Update layout logic here
                    };
                    
                    window.addEventListener('resize', updateLayout);
                    updateLayout();
                    
                    // Return cleanup function
                    return () => {
                        window.removeEventListener('resize', updateLayout);
                    };
                }
            };

                // Initialize interaction manager
                const interactionManager = {
                    init: () => {
                        // Custom cursor system
                        const cursor = document.getElementById('cursor');
                        const speechBubble = document.getElementById('speechBubble');
                        
                        document.addEventListener('mousemove', (e) => {
                            if (cursor && speechBubble) {
                                requestAnimationFrame(() => {
                                    cursor.style.transform = `translate(${e.clientX - 20}px, ${e.clientY - 20}px)`;
                                    speechBubble.style.transform = `translate(${e.clientX - 75}px, ${e.clientY - 60}px)`;
                                });
                            }
                        });

                        // Form validation and submission
                        const joinForm = document.getElementById('joinForm');
                        if (joinForm) {
                            joinForm.addEventListener('submit', (e) => {
                                e.preventDefault();
                                // Add your form submission logic here
                                console.log('Form submitted successfully');
                            });
                        }
                    }
                };

                // Initialize all systems
                return Promise.all([
                    audioSystem.init(),
                    scrollManager.init(),
                    layoutManager.init(),
                    interactionManager.init()
                ]).then(() => {
                    console.log('All systems initialized successfully');
                    document.getElementById('loadingScreen')?.classList.add('hidden');
                });
            } catch (error) {
                console.error('Error initializing systems:', error);
                // Show user-friendly error message
                const errorMessage = document.createElement('div');
                errorMessage.className = 'error-message';
                errorMessage.textContent = 'Something went wrong. Please refresh the page.';
                document.body.appendChild(errorMessage);
                return Promise.reject(error);
            }
        };

        // Start initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeSystems);
        } else {
            initializeSystems().catch(error => {
                console.error('Failed to initialize:', error);
            });
        }

        // Export for debugging purposes
        window.__isekaiExpress = {
            version: '1.0.0',
            initTime: '2025-06-19 11:33:33',
            debug: {
                reloadAnimations: () => initializeSystems(),
                toggleDebugMode: () => document.body.classList.toggle('debug-mode')
            }
        };
    </script>
<script>
// Scroll Reveal IntersectionObserver
const revealEls = document.querySelectorAll('.section .container, .community-card, .route-card');
revealEls.forEach(el => el.classList.add('reveal'));
const observer = new IntersectionObserver((entries,obs)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){ entry.target.classList.add('in-view'); obs.unobserve(entry.target);} });
},{threshold:0.15});
revealEls.forEach(el=>observer.observe(el));
// Cursor Sparkles
const cursorEl=document.getElementById('cursor');
function spawnSparkle(x,y){
  const sp=document.createElement('div');
  sp.className='sparkle';
  sp.style.left=(x-3)+'px';
  sp.style.top=(y-3)+'px';
  document.body.appendChild(sp);
  sp.addEventListener('animationend',()=>sp.remove());
}
document.addEventListener('mousemove',(e)=>{spawnSparkle(e.clientX,e.clientY);});
</script>
</body>
</html>

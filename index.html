<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Isekai Express - Anime-infused virtual trucking in ETS2">
    <title>Isekai Express - Reality Shift Protocol</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    
    <script id="vertexShader" type="x-shader/x-vertex">
        varying vec2 vUv; varying float vNoise; uniform float time; uniform float amplitude;
        vec3 permute(vec3 x){return mod(((x*34.0)+1.0)*x,289.0);}
        float snoise(vec2 v){const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vec2 i=floor(v+dot(v,C.yy));vec2 x0=v-i+dot(i,C.xx);vec2 i1=(x0.x>x0.y)?vec2(1.0,0.0):vec2(0.0,1.0);vec4 x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mod(i,289.0);vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));vec3 m=max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vec3 x=2.0*fract(p*C.www)-1.0;vec3 h=abs(x)-0.5;vec3 ox=floor(x+0.5);vec3 a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vec3 g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;return 130.0*dot(m,g);}
        void main(){vUv=uv;vec3 pos=position;float noiseFreq=1.2;float noiseAmp=amplitude*0.1;vec2 noisePos=vec2(pos.x*noiseFreq+time*0.4,pos.y*noiseFreq+time*0.3);float noise=snoise(noisePos);pos.z+=noise*noiseAmp;vNoise=noise;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.0);}
    </script>
    <script id="fragmentShader" type="x-shader/x-fragment">
        uniform float time; uniform vec2 resolution; uniform vec3 color1; uniform vec3 color2; uniform vec3 color3; uniform float intensity; varying vec2 vUv; varying float vNoise;
        void main(){vec2 uv=vUv;float wave1=sin(uv.x*3.14159+time*0.5)*0.5+0.5;float wave2=cos(uv.y*3.14159+time*0.3)*0.5+0.5;vec3 color=mix(color1,color2,wave1);color=mix(color,color3,wave2);color=mix(color,vec3(1.0),pow(abs(vNoise),2.0)*0.2);float shimmer=sin(time*2.0+uv.x*10.0+uv.y*10.0)*0.1+0.9;color*=shimmer;color*=intensity;gl_FragColor=vec4(color,0.8);}
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&family=Zen+Dots&display=swap');
        
        :root {
            --primary: #ff00c8; --secondary: #00f2ff; --accent: #f8ff38; 
            --dark: #0f0518; --light: #f0f8ff; --contrast-dark: #2a0e40;
            --gradient-1: linear-gradient(135deg,var(--primary),var(--secondary));
            --gradient-2: linear-gradient(45deg,var(--accent),var(--secondary));
            --gradient-3: linear-gradient(90deg,var(--primary),var(--secondary),var(--accent));
            --font-main: 'Rajdhani',sans-serif; --font-display: 'Orbitron',sans-serif; --font-anime: 'Zen Dots',cursive;
            --primary-rgb: 255,0,200; --secondary-rgb: 0,242,255; --accent-rgb: 248,255,56;
            --dark-rgb: 15,5,24; --light-rgb: 240,248,255;
        }
        * { margin:0;padding:0;box-sizing:border-box; }
        body {
            background:var(--dark); color:var(--light); font-family:var(--font-main);
            overflow-x:hidden;
            opacity:0; /* Starts hidden, JS + CSS transition makes it visible */
            transition:opacity .8s ease-out .2s; /* Body fades in after a small delay once opacity set to 1 */
            cursor:none;
        }
        ::-webkit-scrollbar{width:10px} ::-webkit-scrollbar-track{background:var(--contrast-dark)} ::-webkit-scrollbar-thumb{background:var(--gradient-1);border-radius:5px;border:1px solid rgba(var(--dark-rgb),.5)} ::-webkit-scrollbar-thumb:hover{background:var(--gradient-2);box-shadow:0 0 10px var(--accent)}
        #webgl-background{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2;opacity:.4}
        
        .loader-container {
            position:fixed; top:0; left:0; width:100vw; height:100vh;
            background:radial-gradient(ellipse at center,var(--dark) 30%,#030105 100%);
            display:flex; /* Initially visible and flex */
            flex-direction:column; align-items:center; justify-content:center;
            z-index:10000;
            opacity:1; /* Starts fully visible */
            perspective:1200px;
            transition:opacity 1s ease-in-out; /* Defines fade-out transition */
            pointer-events:auto; /* Allows interaction if needed during load */
        }
        .loader-container.hidden { /* JS adds this to START fade-out */
            opacity:0 !important; /* Force fade */
            pointer-events:none; /* No interaction once hidden */
        }
        .loader-symbol-gate{width:clamp(180px,30vw,280px);height:clamp(180px,30vw,280px);position:relative;margin-bottom:30px;transform-style:preserve-3d;animation:gatePulsate 3s ease-in-out infinite,rotateGateComplex 40s linear infinite}
        @keyframes rotateGateComplex{0%{transform:rotateX(10deg) rotateY(0) rotateZ(0) scale(1)}25%{transform:rotateX(15deg) rotateY(90deg) rotateZ(-5deg) scale(1.05)}50%{transform:rotateX(10deg) rotateY(180deg) rotateZ(0) scale(1)}75%{transform:rotateX(5deg) rotateY(270deg) rotateZ(5deg) scale(.95)}100%{transform:rotateX(10deg) rotateY(360deg) rotateZ(0) scale(1)}}
        @keyframes gatePulsate{0%,100%{filter:drop-shadow(0 0 5px var(--secondary)) drop-shadow(0 0 15px var(--secondary));opacity:.9}50%{filter:drop-shadow(0 0 15px var(--primary)) drop-shadow(0 0 30px var(--primary));opacity:1}}
        .gate-ring{position:absolute;top:50%;left:50%;border-style:dashed;border-color:transparent;border-radius:50%;transform-style:preserve-3d;opacity:0}
        .gate-ring-1{width:100%;height:100%;border-width:3px;border-top-color:var(--primary);border-right-color:var(--primary);animation:rotateRing 6s linear infinite,fadeInRing 1s ease-out .2s forwards;--initial-z-rotate:0deg;transform:translate(-50%,-50%) rotateX(70deg) rotateZ(var(--initial-z-rotate)) }
        .gate-ring-2{width:85%;height:85%;border-width:2px;border-bottom-color:var(--secondary);border-left-color:var(--secondary);animation:rotateRing 7s linear infinite reverse,fadeInRing 1s ease-out .4s forwards;--initial-z-rotate:45deg;transform:translate(-50%,-50%) rotateX(70deg) rotateZ(var(--initial-z-rotate)) }
        .gate-ring-3{width:70%;height:70%;border-width:4px;border-style:solid;border-top-color:var(--accent);border-bottom-color:var(--accent);animation:rotateRing 5s linear infinite,fadeInRing 1s ease-out .6s forwards;--initial-z-rotate:-30deg;transform:translate(-50%,-50%) rotateX(70deg) rotateZ(var(--initial-z-rotate)) translateZ(10px); --initial-z-pos:10px;}
        @keyframes rotateRing{from{transform:translate(-50%,-50%) rotateX(70deg) rotateZ(0) scale(var(--scale-val,1))}to{transform:translate(-50%,-50%) rotateX(70deg) rotateZ(360deg) scale(var(--scale-val,1))}}
        @keyframes fadeInRing{from{opacity:0;--scale-val:.5;transform:translate(-50%,-50%) rotateX(70deg) rotateZ(var(--initial-z-rotate)) scale(var(--scale-val)) translateZ(var(--initial-z-pos,0px))}to{opacity:1;--scale-val:1;transform:translate(-50%,-50%) rotateX(70deg) rotateZ(var(--initial-z-rotate)) scale(var(--scale-val)) translateZ(var(--initial-z-pos,0px))}}
        .loader-core-spark{width:30%;height:30%;position:absolute;top:50%;left:50%;background:radial-gradient(ellipse,rgba(var(--light-rgb),.8) 0%,rgba(var(--accent-rgb),.5) 40%,transparent 70%);border-radius:50%;transform:translate(-50%,-50%) translateZ(5px);animation:sparkPulsate 1.5s ease-in-out infinite,fadeInRing 1s ease-out .8s forwards;opacity:0;--initial-z-rotate:0deg;--initial-z-pos:5px;}
        @keyframes sparkPulsate{0%,100%{transform:translate(-50%,-50%) translateZ(5px) scale(.9);opacity:.7}50%{transform:translate(-50%,-50%) translateZ(5px) scale(1.1);opacity:1}}
        .loader-text{font-family:var(--font-anime);font-size:clamp(1.6rem,4vw,2.8rem);font-weight:400;letter-spacing:1px;color:var(--light);text-shadow:0 0 5px rgba(var(--primary-rgb),.7),0 0 10px rgba(var(--secondary-rgb),.5);position:relative;white-space:nowrap;opacity:0;animation:textAppearAndGlitch 2s ease-out 1s forwards,textColorPulse 3s linear infinite 1.5s}
        @keyframes textAppearAndGlitch{0%{opacity:0;transform:scale(.8) translateY(10px);filter:blur(5px)}20%{opacity:1;transform:scale(1.05) translateY(-2px);filter:blur(0px)}22%{transform:scale(1) translateY(0) skewX(-5deg);text-shadow:-2px 0 var(--accent),2px 0 var(--secondary)}25%{transform:scale(1) translateY(0) skewX(0)}50%{transform:scale(1) translateY(0) skewX(3deg);text-shadow:2px 0 var(--primary),-2px 0 var(--accent)}53%{transform:scale(1) translateY(0) skewX(0)}100%{opacity:1;transform:scale(1) translateY(0)}}
        @keyframes textColorPulse{0%,100%{color:var(--light);text-shadow:0 0 8px rgba(var(--primary-rgb),.8),0 0 15px rgba(var(--secondary-rgb),.6)}50%{color:var(--secondary);text-shadow:0 0 8px rgba(var(--secondary-rgb),.8),0 0 15px rgba(var(--primary-rgb),.6)}}
        .loader-text::before,.loader-text::after{content:'';display:none}
        .loader-progress{position:relative;margin-top:35px;width:60%;max-width:250px;height:6px;background:rgba(var(--light-rgb),.05);border:1px solid rgba(var(--primary-rgb),.2);box-shadow:inset 0 0 5px rgba(var(--dark-rgb),.5);overflow:hidden;border-radius:3px;opacity:0;animation:fadeInBar .5s ease-out 2.5s forwards}
        @keyframes fadeInBar{to{opacity:1}}
        .loader-bar{position:absolute;top:0;transform:translateX(-100%);width:100%;height:100%;background:var(--gradient-3);background-size:300% 100%;box-shadow:0 0 10px var(--accent),0 0 5px var(--primary);animation:loadProgressNew 2.5s cubic-bezier(.8,0,.2,1) 2.8s forwards,progressBarGradientAnim 2s linear infinite 2.8s}
        @keyframes loadProgressNew{from{transform:translateX(-100%)}to{transform:translateX(0)}}
        @keyframes progressBarGradientAnim{0%{background-position:0% 50%}100%{background-position:100% 50%}}
        
        /* Rest of your existing CSS below - This has been truncated for brevity in the example. Ensure ALL your previous CSS is here. */
        .magnetic-cursor{position:fixed;width:18px;height:18px;border:2px solid var(--accent);border-radius:50%;pointer-events:none;z-index:9999;mix-blend-mode:screen;transition:width .3s cubic-bezier(.4,0,.2,1),height .3s cubic-bezier(.4,0,.2,1),background-color .3s cubic-bezier(.4,0,.2,1),border-color .3s ease;background:rgba(var(--secondary-rgb),.3);will-change:transform}
        .magnetic-cursor::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:4px;height:4px;background:var(--light);border-radius:50%;transition:all .3s ease;box-shadow:0 0 5px var(--light)}
        .magnetic-cursor.hover{width:70px;height:70px;background:rgba(var(--primary-rgb),.15);border-color:var(--primary);box-shadow:0 0 15px var(--primary),0 0 30px var(--secondary)}
        .magnetic-cursor.hover::after{width:6px;height:6px;background:var(--accent);box-shadow:0 0 10px var(--accent)}
        .nav{position:fixed;top:0;left:0;width:100%;padding:15px 30px;z-index:1000;transition:all .5s cubic-bezier(.165,.84,.44,1);backdrop-filter:blur(12px);background:rgba(var(--dark-rgb),.65);border-bottom:1px solid rgba(var(--primary-rgb),.1)}
        .nav.scrolled{padding:12px 30px;background:rgba(var(--contrast-dark),.85);box-shadow:0 5px 25px -5px rgba(var(--primary-rgb),.4);border-bottom-color:rgba(var(--primary-rgb),.25)}
        .nav-logo{font-family:var(--font-anime);font-size:clamp(1.4rem,3.5vw,2rem);background:var(--gradient-1);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;position:relative;cursor:pointer;animation:gradientShift 4s ease-in-out infinite;transition:transform .3s ease}
        .nav-links{display:flex;gap:clamp(20px,4vw,35px)}
        .nav-link{font-family:var(--font-main);font-weight:600;color:var(--light);text-decoration:none;font-size:clamp(.9rem,1.8vw,1.05rem);position:relative;padding:5px 0;transition:all .3s ease}
        .nav-link:hover{color:var(--accent);text-shadow:0 0 8px var(--accent),0 0 15px var(--primary)}
        .nav-link::before{content:'';position:absolute;bottom:-2px;left:0;width:100%;height:3px;background:var(--gradient-2);transform:scaleX(0);transform-origin:right;transition:transform .4s cubic-bezier(.76,0,.24,1)}
        .nav-link:hover::before{transform:scaleX(1);transform-origin:left}
        .mobile-menu-toggle{display:none;flex-direction:column;cursor:pointer;width:30px;height:22px;justify-content:space-around;z-index:1001;transition:transform .3s ease}
        .mobile-menu-toggle span{width:100%;height:3px;background:var(--secondary);transition:all .3s cubic-bezier(.68,-.55,.27,1.55);transform-origin:center;border-radius:1px}
        .mobile-menu-toggle.active span:nth-child(1){transform:rotate(45deg) translate(6px,6px)}
        .mobile-menu-toggle.active span:nth-child(2){transform:scaleX(0);opacity:0}
        .mobile-menu-toggle.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-7px)}
        .mobile-menu{position:fixed;top:0;right:-100%;width:clamp(280px,75vw,380px);height:100vh;background:rgba(var(--contrast-dark),.97);backdrop-filter:blur(18px);display:flex;flex-direction:column;justify-content:center;align-items:center;gap:35px;z-index:999;transition:right .6s cubic-bezier(.68,0,.26,1);box-shadow:-10px 0 35px rgba(var(--dark-rgb),.5)}
        .mobile-menu.active{right:0}
        .mobile-menu .nav-link{font-size:1.7rem;text-align:center;opacity:0;transform:translateX(-30px)}
        .hero{padding-top:100px;padding-bottom:60px;min-height:100vh;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden}
        .glowing-effects{position:absolute;pointer-events:none;width:100%;height:100%;top:0;left:0;z-index:0;overflow:hidden}
        .glowing-effects::before{content:'';position:absolute;border-radius:50%;background:var(--primary);filter:blur(130px);opacity:.3;animation-duration:9s;width:clamp(300px,45vw,550px);height:clamp(300px,45vw,550px);top:10%;left:5%;animation:glowFloat 9s ease-in-out infinite}
        .glowing-effects::after{content:'';position:absolute;border-radius:50%;background:var(--secondary);filter:blur(140px);opacity:.35;animation-duration:11s;width:clamp(400px,55vw,650px);height:clamp(400px,55vw,650px);bottom:10%;right:5%;animation:glowFloat 11s ease-in-out infinite -5.5s}
        @keyframes glowFloat{0%,100%{transform:translate(0,0) scale(1);opacity:.25}25%{transform:translate(60px,-40px) scale(1.15);opacity:.3}50%{transform:translate(-40px,60px) scale(.85);opacity:.2}75%{transform:translate(40px,40px) scale(1.1);opacity:.28}}
        .hero-content{position:relative;z-index:2;text-align:center;max-width:900px;width:100%}
        .hero-title{font-family:var(--font-display);font-size:clamp(2.8rem,9vw,6.5rem);font-weight:900;line-height:1.05;margin-bottom:35px;position:relative;text-transform:uppercase;letter-spacing:1px;color:var(--light)}
        .hero-subtitle{font-size:clamp(1.1rem,2.5vw,1.6rem);color:rgba(var(--light-rgb),.85);line-height:1.7;margin-bottom:45px;max-width:750px;margin-left:auto;margin-right:auto}
        .hero-cta{display:inline-block;font-family:var(--font-display);text-transform:uppercase;letter-spacing:.5px;padding:18px 45px;font-size:clamp(1rem,2.8vw,1.3rem);font-weight:700;color:var(--light);text-decoration:none;background:var(--gradient-1);background-size:250% 100%;border-radius:50px;position:relative;overflow:hidden;border:2px solid transparent;box-shadow:0 10px 30px rgba(var(--primary-rgb),.3);transition:all .4s cubic-bezier(.165,.84,.44,1),border-color .3s ease,box-shadow .3s ease,background-position .5s ease;transform-style:preserve-3d}
        .hero-cta:hover{background-position:right center;color:var(--light);border-color:var(--accent);transform:translateY(-6px) scale(1.03) perspective(800px) rotateX(3deg);box-shadow:0 15px 30px rgba(var(--primary-rgb),.35),0 0 20px var(--accent)}
        .hero-cta::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(var(--light-rgb),.3),transparent);transition:left .6s cubic-bezier(.25,.46,.45,.94)}
        .hero-cta:hover::before{left:100%}
        .particles-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
        .particle{position:absolute;border-radius:20% 80% 30% 70%/70% 30% 80% 20%;box-shadow:0 0 5px currentColor,0 0 10px currentColor;opacity:0;will-change:transform,opacity}
        .section-title{font-family:var(--font-anime);font-size:clamp(2.2rem,5.5vw,3.8rem);letter-spacing:1px;margin-bottom:70px;text-transform:uppercase;text-align:center;font-weight:400;background:var(--gradient-2);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
        .features{position:relative;padding:100px 20px;background:linear-gradient(to bottom,transparent 0%,rgba(var(--dark-rgb),.5) 20%,var(--contrast-dark) 100%)}
        .features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:clamp(35px,4vw,50px);max-width:1400px;margin:0 auto}
        .feature-card{background:rgba(var(--contrast-dark),.5);backdrop-filter:blur(15px) saturate(120%);border:1px solid rgba(var(--primary-rgb),.2);border-radius:15px;padding:35px;box-shadow:0 8px 25px rgba(var(--dark-rgb),.5),inset 0 0 10px rgba(var(--primary-rgb),.1);transition:all .4s cubic-bezier(.165,.84,.44,1);position:relative;overflow:hidden;cursor:pointer}
        .feature-card:hover{transform:translateY(-12px) scale(1.04) rotateX(2deg) rotateY(-2deg);border-color:var(--secondary);box-shadow:0 15px 35px rgba(var(--secondary-rgb),.3),inset 0 0 15px rgba(var(--accent-rgb),.2)}
        .feature-card::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(var(--accent-rgb),.15),transparent);transition:left .7s cubic-bezier(.25,.46,.45,.94)}
        .feature-card:hover::before{left:100%}
        .feature-icon{display:block;font-size:2.8rem;margin-bottom:20px;background:var(--gradient-1);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 10px currentColor;transition:transform .4s cubic-bezier(.68,-.55,.27,1.55)}
        .feature-card:hover .feature-icon{transform:scale(1.3) rotate(8deg) translateY(-5px)}
        .feature-title{font-family:var(--font-display);color:var(--secondary);text-transform:uppercase;font-size:clamp(1.3rem,2.5vw,1.7rem);margin-bottom:12px}
        .feature-description{color:rgba(var(--light-rgb),.75);line-height:1.65;font-size:clamp(.9rem,1.8vw,1rem)}
        .fleet{padding:100px 20px;position:relative;background:var(--dark);overflow:hidden}
        .fleet .section-title{color:var(--light);background:var(--gradient-1);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
        .fleet-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:clamp(40px,4.5vw,60px);max-width:1600px;margin:0 auto;perspective:3000px}
        .truck-card{background:linear-gradient(155deg,rgba(var(--dark-rgb),.8),rgba(var(--contrast-dark),.9));border:1px solid rgba(var(--secondary-rgb),.15);border-radius:18px;padding:30px;position:relative;overflow:hidden;transform-style:preserve-3d;box-shadow:0 15px 40px rgba(var(--dark-rgb),.6);transition:transform .6s cubic-bezier(.16,1,.3,1),box-shadow .6s cubic-bezier(.16,1,.3,1),border-color .5s ease;cursor:pointer}
        .truck-card:hover{transform:scale(1.05) translateZ(30px) rotateY(var(--rotateY,0deg)) rotateX(var(--rotateX,0deg));box-shadow:0 0 20px var(--primary),0 0 40px var(--secondary),inset 0 0 30px rgba(var(--accent-rgb),.1);border-color:var(--accent)}
        .truck-card-image-container{width:100%;height:220px;border-radius:12px;overflow:hidden;margin-bottom:25px;background:rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;position:relative;transform:translateZ(20px)}
        .truck-card-image-container img{width:100%;height:100%;object-fit:cover;transition:transform .6s cubic-bezier(.165,.84,.44,1);filter:saturate(110%) contrast(105%)}
        .truck-card:hover .truck-card-image-container img{transform:scale(1.12)}
        .truck-card-image-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to top,rgba(var(--dark-rgb),.9) 0%,transparent 70%);opacity:1;transition:opacity .5s ease}
        .truck-card:hover .truck-card-image-overlay{opacity:.6}
        .truck-card-title{font-family:var(--font-display);font-size:clamp(1.5rem,3vw,2rem);color:var(--primary);margin-bottom:15px;text-transform:uppercase;text-shadow:0 0 10px var(--primary);transform:translateZ(40px)}
        .truck-card-specs{list-style:none;padding:0;margin-bottom:25px;transform:translateZ(30px)}
        .truck-card-specs li{font-size:clamp(.9rem,1.9vw,1.05rem);color:rgba(var(--light-rgb),.7);margin-bottom:10px;position:relative;padding-left:28px}
        .truck-card-specs li::before{content:'💠';position:absolute;left:0;color:var(--secondary);font-weight:700;font-size:1.2em;top:-2px;text-shadow:0 0 5px var(--secondary)}
        .truck-card-glow{position:absolute;top:50%;left:50%;width:400px;height:400px;background:radial-gradient(circle,rgba(var(--primary-rgb),.15) 0%,transparent 60%);transform:translate(-50%,-50%) scale(0);border-radius:50%;pointer-events:none;transition:transform 1s cubic-bezier(.16,1,.3,1),opacity 1s cubic-bezier(.16,1,.3,1);opacity:0;z-index:-1}
        .truck-card:hover .truck-card-glow{transform:translate(-50%,-50%) scale(1.9);opacity:1}
        .join{padding:100px 20px;text-align:center;position:relative;overflow:hidden;background:var(--gradient-2)}
        .join::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-image:linear-gradient(rgba(var(--light-rgb),.03) 1px,transparent 1px),linear-gradient(90deg,rgba(var(--light-rgb),.03) 1px,transparent 1px);background-size:30px 30px;opacity:.7;animation:subtleScroll 20s linear infinite}
        @keyframes subtleScroll{0%{background-position:0 0}100%{background-position:60px 60px}}
        .join-content{position:relative;z-index:2;max-width:800px;margin:0 auto}
        .join-title{font-family:var(--font-anime);font-size:clamp(2rem,5vw,3.2rem);color:var(--dark);text-shadow:0 0 10px rgba(var(--accent-rgb),.7),1px 1px 0 rgba(var(--light-rgb),.5);margin-bottom:25px;font-weight:400}
        .join-description{color:rgba(var(--dark-rgb),.9);font-weight:500;font-size:clamp(1rem,2.5vw,1.2rem);line-height:1.7;margin-bottom:40px}
        .join-buttons{display:flex;gap:25px;justify-content:center;flex-wrap:wrap}
        .join-button{font-family:var(--font-display);text-transform:uppercase;font-size:clamp(.9rem,2.2vw,1.15rem);background:rgba(var(--dark-rgb),.15);color:var(--light);border:2px solid rgba(var(--light-rgb),.3);border-radius:30px;padding:16px 35px;text-decoration:none;backdrop-filter:blur(5px);text-shadow:0 0 5px currentColor;transition:all .35s cubic-bezier(.165,.84,.44,1);position:relative;overflow:hidden}
        .join-button:hover{background:rgba(var(--dark-rgb),.3);border-color:var(--accent);color:var(--accent);transform:translateY(-4px) scale(1.02);box-shadow:0 5px 15px rgba(var(--dark-rgb),.3),0 0 10px var(--accent)}
        .join-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:var(--accent);z-index:-1;opacity:.2;transition:left .4s cubic-bezier(.77,0,.175,1)}
        .join-button:hover::before{left:0}
        #contact.features{background:linear-gradient(to bottom,var(--dark) 0%,var(--contrast-dark) 100%);padding:100px 20px}
        .contact-form{max-width:800px;margin:0 auto;display:grid;gap:25px}
        .contact-input{background:rgba(var(--dark-rgb),.5);border:1px solid rgba(var(--secondary-rgb),.25);padding:16px 22px;font-size:1rem;color:var(--light);border-radius:8px;font-family:var(--font-main);transition:all .3s ease;outline:none}
        .contact-input::placeholder{color:rgba(var(--light-rgb),.4)}
        .contact-input:focus{border-color:var(--primary);box-shadow:0 0 15px rgba(var(--primary-rgb),.4),inset 0 0 8px rgba(var(--secondary-rgb),.15);background:rgba(var(--dark-rgb),.7)}
        .contact-form .hero-cta{width:auto;margin:10px auto 0;padding:16px 40px}
        .footer{padding:80px 20px 40px;background:linear-gradient(to top,#020003,var(--dark));border-top:1px solid rgba(var(--primary-rgb),.15);position:relative;text-align:center;overflow:hidden}
        .footer-content{max-width:1200px;margin:0 auto;position:relative;z-index:1}
        .footer-logo{font-family:var(--font-anime);font-size:clamp(1.6rem,4vw,2.4rem);background: var(--gradient-1); -webkit-background-clip: text; background-clip: text;-webkit-text-fill-color: transparent; animation: gradientShift 4s ease-in-out infinite; margin-bottom:25px; display:inline-block;}
        .footer-links{display:flex;justify-content:center;gap:clamp(18px,3vw,28px);margin-bottom:30px;flex-wrap:wrap}
        .footer-link{color:rgba(var(--light-rgb),.5);text-decoration:none;font-size:clamp(.85rem,1.7vw,1rem);transition:all .3s ease;font-weight:500}
        .footer-link:hover{color:var(--secondary);text-shadow:0 0 8px var(--secondary);transform:translateY(-2px)}
        .social-icons{display:flex;justify-content:center;gap:clamp(20px,3.5vw,30px);margin-bottom:30px}
        .social-icon svg{width:26px;height:26px}
        .social-icon{color:rgba(var(--light-rgb),.3);transition:all .3s cubic-bezier(.68,-.55,.27,1.55);display:inline-block}
        .social-icon:hover{color:var(--accent);transform:scale(1.3) rotate(5deg) translateY(-2px)}
        .copyright{font-size:clamp(.75rem,1.4vw,.85rem);color:rgba(var(--light-rgb),.25);line-height:1.6}
        .reveal-up{opacity:0;transform:translateY(40px)}
        .reveal-scale{opacity:0;transform:scale(.85)}
        .gsap-char-reveal span{display:inline-block;opacity:0;transform:translateY(20px) scale(.5);filter:blur(3px)}
        .parallax-layer{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1;will-change:transform}
        .parallax-layer-1{background-image:radial-gradient(circle at 15% 25%,rgba(var(--primary-rgb),.08) .5px,transparent .5px),radial-gradient(circle at 75% 65%,rgba(var(--secondary-rgb),.08) .5px,transparent .5px),radial-gradient(circle at 40% 80%,rgba(var(--accent-rgb),.06) .5px,transparent .5px);background-size:80px 80px,100px 100px,90px 90px;opacity:.6}
        .parallax-layer-2{background-image:linear-gradient(45deg,rgba(var(--accent-rgb),.03) 25%,transparent 25%,transparent 75%,rgba(var(--accent-rgb),.03) 75%),linear-gradient(45deg,rgba(var(--accent-rgb),.03) 25%,transparent 25%,transparent 75%,rgba(var(--accent-rgb),.03) 75%);background-size:60px 60px;background-position:0 0,30px 30px;opacity:.4}
        @media(max-width:768px){.nav{padding:12px 20px}.nav.scrolled{padding:10px 20px}.nav-links{display:none}.mobile-menu-toggle{display:flex}.hero{padding-top:80px}.hero-title{font-size:clamp(2.4rem,10vw,4rem)}.hero-subtitle{font-size:clamp(1rem,4vw,1.3rem);margin-bottom:35px}.hero-cta{padding:16px 35px;font-size:clamp(1rem,3.5vw,1.1rem)}.section-title{font-size:clamp(2rem,6vw,3rem);margin-bottom:50px}.features-grid,.fleet-grid{grid-template-columns:1fr;gap:30px}.feature-card,.truck-card{padding:30px}.join-title{font-size:clamp(1.8rem,5.5vw,2.5rem)}.join-description{font-size:clamp(.95rem,3.8vw,1.15rem)}.join-buttons{flex-direction:column;gap:18px;align-items:center}.join-button{width:min(90%,320px)}.footer-links{flex-direction:column;gap:12px;margin-bottom:25px}}

    </style>
</head>
<body>
    <div class="loader-container"> <!-- JS will add .hidden to this -->
        <div class="loader-symbol-gate">
            <div class="gate-ring gate-ring-1"></div><div class="gate-ring gate-ring-2"></div>
            <div class="gate-ring gate-ring-3" style="--initial-z-pos:10px;"></div>
            <div class="loader-core-spark" style="--initial-z-pos:5px;"></div>
        </div>
        <div class="loader-text" data-text="INITIATING DIVE...">INITIATING DIVE...</div>
        <div class="loader-progress"><div class="loader-bar"></div></div>
    </div>

    <canvas id="webgl-background"></canvas>
    <div class="magnetic-cursor"></div>
    <div class="parallax-layer parallax-layer-1" data-depth="0.05"></div>
    <div class="parallax-layer parallax-layer-2" data-depth="0.1"></div>

    <nav class="nav">
        <div class="nav-container">
            <a href="#hero" class="nav-logo magnetic-target">IsekaiX</a>
            <div class="nav-links">
                <a href="#hero" class="nav-link magnetic-target">START_POINT</a><a href="#features" class="nav-link magnetic-target">SYSTEM_SPECS</a>
                <a href="#fleet" class="nav-link magnetic-target">MECH_BAY</a><a href="#join" class="nav-link magnetic-target">JOIN_SQUAD</a>
                <a href="#contact" class="nav-link magnetic-target">TRANSMISSION</a>
            </div>
            <div class="mobile-menu-toggle magnetic-target"><span></span><span></span><span></span></div>
        </div>
    </nav>
    <div class="mobile-menu">
        <a href="#hero" class="nav-link">START_POINT</a> <a href="#features" class="nav-link">SYSTEM_SPECS</a>
        <a href="#fleet" class="nav-link">MECH_BAY</a> <a href="#join" class="nav-link">JOIN_SQUAD</a>
        <a href="#contact" class="nav-link">TRANSMISSION</a>
    </div>

    <main>
        <section id="hero" class="hero">
            <div class="glowing-effects"></div> <div class="particles-container"></div>
            <div class="hero-content">
                <h1 class="hero-title gsap-char-reveal">Shift Your Reality</h1>
                <p class="hero-subtitle reveal-up" data-delay="0.6">Dive into Isekai Express: where hyper-advanced virtual trucking collides with otherworldly dimensions. Your next journey begins now.</p>
                <a href="#join" class="hero-cta magnetic-target reveal-up" data-delay="0.8">Engage Warp Drive</a>
            </div>
        </section>
        <section id="features" class="features">
            <h2 class="section-title reveal-up">Core System Advantages</h2>
            <div class="features-grid">
                <div class="feature-card magnetic-target"><span class="feature-icon">✨</span><h3 class="feature-title">Quantum Immersion</h3><p class="feature-description">Experience ETS2 like never before with reality-bending mods and ethereal visual overhauls. Trucking on a new dimensional plane.</p></div>
                <div class="feature-card magnetic-target"><span class="feature-icon">🌌</span><h3 class="feature-title">Nexus Convoys</h3><p class="feature-description">Join our interdimensional fleet! Regular convoys traversing vibrant landscapes and digital dreamscapes. A global crew awaits.</p></div>
                <div class="feature-card magnetic-target"><span class="feature-icon">🤖</span><h3 class="feature-title">Arcane Machinery</h3><p class="feature-description">Pilot custom-tuned rigs infused with techno-magical enhancements. Exclusive skins, particle effects, and god-tier performance.</p></div>
                <div class="feature-card magnetic-target"><span class="feature-icon">💠</span><h3 class="feature-title">Ascension Path</h3><p class="feature-description">Forge your legend in our dynamic ranking system. Unlock unique titles, abilities, and cosmic bragging rights.</p></div>
            </div>
        </section>
        <section id="fleet" class="fleet">
            <h2 class="section-title reveal-up">Prime Dimensional Rigs</h2>
            <div class="fleet-grid">
                <div class="truck-card magnetic-target"><div class="truck-card-image-container"><img src="https://images.unsplash.com/photo-1587588266369-f8381518f000?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fGZ1dHVyaXN0aWMlMjB0cnVja3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" alt="CyberRig X7"><div class="truck-card-image-overlay"></div></div><h3 class="truck-card-title">Astral Juggernaut</h3><ul class="truck-card-specs"><li>Core: Nebula Reactor VII</li><li>Output: 9000 Astral HP</li><li>Trait: Phasing Matrix, Comet Trail</li></ul><div class="truck-card-glow"></div></div>
                <div class="truck-card magnetic-target"><div class="truck-card-image-container"><img src="https://images.unsplash.com/photo-1629828420993-5939327cb934?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fGZ1dHVyaXN0aWMlMjB0cnVja3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" alt="NovaHauler Pro"><div class="truck-card-image-overlay"></div></div><h3 class="truck-card-title">Voidstrider Mk.II</h3><ul class="truck-card-specs"><li>Engine: Singularity Drive</li><li>Range: Trans-Universal</li><li>Trait: Shadow Cloak, Rift Jump</li></ul><div class="truck-card-glow"></div></div>
                <div class="truck-card magnetic-target"><div class="truck-card-image-container"><img src="https://images.unsplash.com/photo-1633882141584-df6a49ce4076?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8ZnV0dXJpc3RpYyUyMHRydWNrfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60" alt="Quantum Voyager"><div class="truck-card-image-overlay"></div></div><h3 class="truck-card-title">Chrono Phoenix</h3><ul class="truck-card-specs"><li>Engine: Temporal Flux Capacitor</li><li>Speed: Beyond Light</li><li>Trait: Time Dilation Field, Aura Burst</li></ul><div class="truck-card-glow"></div></div>
            </div>
        </section>
        <section id="join" class="join">
            <div class="join-content">
                <h2 class="join-title reveal-up">Ready for the Quantum Leap?</h2>
                <p class="join-description reveal-up" data-delay="0.1">Answer the call of the digital cosmos. Isekai Express is recruiting elite pilots for reality-defying expeditions. The Nexus awaits your signal.</p>
                <div class="join-buttons">
                    <a href="#" class="join-button magnetic-target reveal-scale" data-delay="0.2">Enlist Protocol</a>
                    <a href="#" class="join-button magnetic-target reveal-scale" data-delay="0.3">Open Comms (Discord)</a>
                </div>
            </div>
        </section>
        <section id="contact" class="features" style="padding-bottom:120px">
             <h2 class="section-title reveal-up">Establish Contact</h2>
             <form class="contact-form reveal-up" data-delay="0.1">
                <input type="text" placeholder="Your Callsign (Name)" name="name" required class="contact-input magnetic-target"><input type="email" placeholder="Secure Channel (Email)" name="email" required class="contact-input magnetic-target">
                <textarea placeholder="Your Encrypted Message" name="message" rows="6" required class="contact-input magnetic-target"></textarea>
                <button type="submit" class="hero-cta magnetic-target" style="width:auto;margin:10px auto 0">Transmit Data</button>
             </form>
        </section>
    </main>
    <footer class="footer">
        <div class="footer-content">
            <a href="#hero" class="footer-logo magnetic-target">IsekaiX</a>
            <div class="footer-links">
                <a href="#hero" class="footer-link magnetic-target">Restart_Sim</a><a href="#features" class="footer-link magnetic-target">Lore_Files</a>
                <a href="#fleet" class="footer-link magnetic-target">Archives</a><a href="#" class="footer-link magnetic-target" onclick="alert('Accessing Holo-Archives... Classified.')">DATA_PRIVACY_LOG</a>
                <a href="#" class="footer-link magnetic-target" onclick="alert('Consulting Universal Codex... Stand By.')">SERVICE_MANDATE</a>
            </div>
            <div class="social-icons">
                <a href="#" class="social-icon magnetic-target" aria-label="Discord" title="Discord"><svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor"><path d="M19.54 0c-.46 0-.88.13-1.25.38L3.5 10.46a2.03 2.03 0 000 3.65l3.96 1.98a.93.93 0 00.95-.08L17.5 7.82a.7.7 0 01.98.98L9.4 18.27a.93.93 0 00-.08.95l1.98 3.96c.3.59.86.95 1.48.95.3 0 .6-.06.88-.2l14.28-9.52A2.03 2.03 0 0019.54 0zM7.52 20.48l-2.5-5 10.5-7.01 5 2.5-13 9.51z"/></svg></a>
                <a href="#" class="social-icon magnetic-target" aria-label="X-Platform" title="X-Platform"><svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25h6.08l4.308 5.926L18.244 2.25zm-1.16 17.52h1.833L7.084 4.126H5.117l11.967 15.644z"/></svg></a>
                <a href="#" class="social-icon magnetic-target" aria-label="Holo-Stream" title="Holo-Stream"><svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor"><path d="M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM9.75 15.5V8.5l6.5 3.5-6.5 3.5z"/></svg></a>
            </div>
            <p class="copyright">© <span id="currentYear"></span> IsekaiX Protocol. All Realities Synchronized. // Unauthorized Access Will Be Transmuted //</p>
        </div>
    </footer>
    
    <script>
    console.log("Script execution started.");
    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
    const lerp = (a, b, n) => (1 - n) * a + n * b;
    let mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
    let isPageLoaded = false;

    document.addEventListener('DOMContentLoaded', () => {
        console.log("DOMContentLoaded fired.");
        const loaderContainer = document.querySelector('.loader-container');
        const body = document.body;

        const LOADER_ANIMATION_DURATION = 4500; // Total time loader animations run (visual part)
        const LOADER_FADE_OUT_CSS = 1000;   // Duration of .loader-container opacity transition in CSS

        console.log(`Loader UI will be visible for ${LOADER_ANIMATION_DURATION}ms.`);

        if (!loaderContainer) {
            console.error("CRITICAL: Loader container not found! Page might not display correctly.");
            body.style.opacity = '1'; // Make body visible anyway
            isPageLoaded = true;
            initPage(); // Attempt to init page
            return;
        }

        // This timeout controls how long the loader UI elements (animations etc.) are active.
        setTimeout(() => {
            console.log("Loader animation duration reached. Starting fade out of loader and fade in of body.");
            
            loaderContainer.classList.add('hidden'); // This triggers CSS opacity transition to 0
            body.style.opacity = '1'; // This triggers CSS opacity transition to 1

            // This timeout removes the loader from the DOM *after* its fade-out CSS transition completes.
            setTimeout(() => {
                if (loaderContainer.parentNode) {
                    // loaderContainer.parentNode.removeChild(loaderContainer); // Alternative: remove completely
                    loaderContainer.style.display = 'none'; // Or just hide
                    console.log("Loader display set to 'none'.");
                }
            }, LOADER_FADE_OUT_CSS); // Match loader's CSS opacity transition duration

            isPageLoaded = true; // Set page as loaded

            // Slightly delay initPage to ensure body opacity transition has started and DOM is stable.
            setTimeout(() => {
                console.log("Calling initPage().");
                initPage(); 
            }, 200); // Small delay, can be adjusted. Was 50, now 200 for more buffer.

        }, LOADER_ANIMATION_DURATION);
    });

    function initPage() {
        if (!isPageLoaded) {
            console.warn("initPage called prematurely or isPageLoaded flag not set.");
            return; // Don't run if the main load sequence hasn't finished
        }
        console.log("initPage(): Starting full page initialization.");

        try { console.log("Init: ThreeJS Background"); initThreeJSBackground(); } 
        catch (e) { console.error("Error in initThreeJSBackground:", e); }

        try { console.log("Init: Custom Cursor"); initCustomCursor(); }
        catch (e) { console.error("Error in initCustomCursor:", e); }
        
        try { console.log("Init: Navigation"); initNavigation(); }
        catch (e) { console.error("Error in initNavigation:", e); }
        
        try { console.log("Init: Anime Hero Particles"); initAnimeHeroParticles(70); }
        catch (e) { console.error("Error in initAnimeHeroParticles:", e); }

        try { console.log("Init: Anime Scroll Animations"); initAnimeScrollAnimations(); }
        catch (e) { console.error("Error in initAnimeScrollAnimations:", e); }

        try { console.log("Init: Magnetic Targets"); initMagneticTargets(); }
        catch (e) { console.error("Error in initMagneticTargets:", e); }

        try { console.log("Init: Copyright Year"); updateCopyrightYear(); }
        catch (e) { console.error("Error in updateCopyrightYear:", e); }

        try { console.log("Init: Mobile Menu"); initMobileMenu(); }
        catch (e) { console.error("Error in initMobileMenu:", e); }

        try { console.log("Init: Parallax"); initParallax(); }
        catch (e) { console.error("Error in initParallax:", e); }

        try { console.log("Init: Smooth Scroll"); initSmoothScroll(); }
        catch (e) { console.error("Error in initSmoothScroll:", e); }
        
        console.log("initPage(): All initializations attempted.");
    }
    
    // Minified versions or functional stubs if complex functions are suspected
    function initThreeJSBackground(){try{const e=new THREE.Scene,t=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),i=new THREE.WebGLRenderer({canvas:document.getElementById("webgl-background"),alpha:!0,antialias:!0});i.setSize(window.innerWidth,window.innerHeight),i.setPixelRatio(Math.min(window.devicePixelRatio,2));const n=new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue("--primary").trim()),o=new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue("--secondary").trim()),r=new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue("--accent").trim()),a=new THREE.PlaneGeometry(14,14,160,160),l=new THREE.ShaderMaterial({vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent,uniforms:{time:{value:0},resolution:{value:new THREE.Vector2(window.innerWidth,window.innerHeight)},color1:{value:n},color2:{value:o},color3:{value:r},intensity:{value:.6},amplitude:{value:.4}},transparent:!0,depthWrite:!1,blending:THREE.AdditiveBlending}),d=new THREE.Mesh(a,l);e.add(d),t.position.z=2;let s=0;!function c(m){requestAnimationFrame(c);const p=(m-s)*.001;s=m,l.uniforms.time.value+=.35*p,i.render(e,t)}(0),window.addEventListener("resize",()=>{t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight),i.setPixelRatio(Math.min(window.devicePixelRatio,2)),l.uniforms.resolution.value.set(window.innerWidth,window.innerHeight)})}catch(e){console.error("Three.js init failed:",e);const t=document.getElementById("webgl-background");t&&(t.style.display="none")}}
    function initCustomCursor(){const e=document.querySelector(".magnetic-cursor");if(!e)return;let t=mouse.x,i=mouse.y;const n=.15;window.addEventListener("mousemove",e=>{mouse.x=e.clientX,mouse.y=e.clientY});!function o(){if(!isPageLoaded)return void requestAnimationFrame(o);t=lerp(t,mouse.x,n),i=lerp(i,mouse.y,n),e.style.transform=`translate3d(${t-e.offsetWidth/2}px, ${i-e.offsetHeight/2}px, 0)`,requestAnimationFrame(o)}();document.querySelectorAll("a, button, .feature-card, .truck-card, .mobile-menu-toggle").forEach(t=>{t.classList.contains("magnetic-target")||(t.addEventListener("mouseenter",()=>e.classList.add("hover")),t.addEventListener("mouseleave",()=>e.classList.remove("hover")))})}
    function initMagneticTargets(){const e=document.querySelectorAll(".magnetic-target"),t=document.querySelector(".magnetic-cursor");if(!e.length||!t)return;e.forEach(e=>{e.addEventListener("mouseenter",()=>t.classList.add("hover")),e.addEventListener("mouseleave",()=>{t.classList.remove("hover"),gsap.to(e,{x:0,y:0,scale:1,duration:.6,ease:"elastic.out(1.2, 0.5)"})}),e.addEventListener("mousemove",function(t){const i=e.getBoundingClientRect(),n=i.left+i.width/2,o=i.top+i.height/2,r=t.clientX-n,a=t.clientY-o;gsap.to(e,{x:.35*r,y:.35*a,scale:1.05+Math.abs(.001*r),duration:.9,ease:"power4.out"})})})}
    function initNavigation(){const e=document.querySelector(".nav");e&&ScrollTrigger.create({start:"top -70",end:99999,toggleClass:{className:"scrolled",targets:e}})}
    function initMobileMenu(){const e=document.querySelector(".mobile-menu-toggle"),t=document.querySelector(".mobile-menu"),i=t.querySelectorAll(".nav-link");if(!e||!t)return;e.addEventListener("click",()=>{const n=e.classList.toggle("active");t.classList.toggle("active"),document.body.style.overflow=n?"hidden":"",n&&gsap.fromTo(i,{opacity:0,x:-30},{opacity:1,x:0,duration:.5,stagger:{amount:.3,from:"start"},ease:"power3.out",delay:.1})}),i.forEach(i=>{i.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""})})}
    function initAnimeHeroParticles(e=70){const t=document.querySelector(".particles-container");if(!t)return;t.innerHTML="";const i=[getComputedStyle(document.documentElement).getPropertyValue("--primary").trim(),getComputedStyle(document.documentElement).getPropertyValue("--secondary").trim(),getComputedStyle(document.documentElement).getPropertyValue("--accent").trim()];for(let n=0;n<e;n++){const e=document.createElement("div");e.classList.add("particle");const o=5*Math.random()+1.5;e.style.width=`${o}px`,e.style.height=`${o*(1.5*Math.random()+.5)}px`,e.style.left=`${100*Math.random()}%`,e.style.top=`${100*Math.random()}%`;const r=i[Math.floor(Math.random()*i.length)];e.style.backgroundColor=r;const a=5*Math.random()+4,l=4*Math.random();gsap.set(e,{opacity:0,scale:.5*Math.random()+.5,x:50*(Math.random()-.5),y:50*(Math.random()-.5)}),gsap.to(e,{duration:a,delay:l,opacity:.5*Math.random()+.3,x:300*(Math.random()-.5),y:300*(Math.random()-.5),rotationZ:720*(Math.random()-.5),scale:.3*Math.random()+.2,repeat:-1,yoyo:!0,ease:"sine.inOut"}),t.appendChild(e)}}
    function initParallax(){const e=document.querySelectorAll(".parallax-layer");e.length&&e.forEach(e=>{const t=parseFloat(e.dataset.depth)||.1;gsap.to(e,{y:()=>-ScrollTrigger.maxScroll(window)*t,ease:"none",scrollTrigger:{trigger:"body",start:"top top",end:"bottom bottom",scrub:2.2}})})}
    function initAnimeScrollAnimations(){const e=document.querySelector(".hero-title.gsap-char-reveal");e&& (e.innerHTML=e.textContent.split("").map(e=>" "===e?"<span> </span>":`<span>${e}</span>`).join(""),gsap.fromTo(e.querySelectorAll("span"),{opacity:0,y:30,x:e=>(Math.random()-.5)*30,scale:.7,filter:"blur(4px)",rotationZ:e=>(Math.random()-.5)*20},{opacity:1,y:0,x:0,scale:1,filter:"blur(0px)",rotationZ:0,duration:.8,ease:"expo.out",stagger:{amount:.6,from:"random"},delay:.5,scrollTrigger:{trigger:e,start:"top 90%",toggleActions:"play none none none"}}));gsap.utils.toArray(".section-title.reveal-up").forEach(e=>{gsap.fromTo(e,{opacity:0,y:50,skewX:-10,filter:"blur(3px)"},{opacity:1,y:0,skewX:0,filter:"blur(0px)",duration:1,ease:"power4.out",scrollTrigger:{trigger:e,start:"top 88%",toggleActions:"play none none none"}})});gsap.from(".feature-card",{scrollTrigger:{trigger:".features-grid",start:"top 85%",toggleActions:"play none none none",once:!0},opacity:0,x:e=>e%2==0?-60:60,y:40,scale:.9,rotationZ:e=>e%2==0?-5:5,duration:.7,stagger:.1,ease:"power3.out"});gsap.from(".truck-card",{scrollTrigger:{trigger:".fleet-grid",start:"top 85%",toggleActions:"play none none none",once:!0},opacity:0,y:80,z:-100,rotationX:-25,rotationY:e=>e%2==0?15:-15,transformOrigin:"center center -100px",duration:.9,stagger:.15,ease:"expo.out"});gsap.utils.toArray(".join-content .reveal-up, .join-content .reveal-scale").forEach(e=>{let t={opacity:0,scale:e.classList.contains("reveal-scale")?.6:.8,filter:"blur(5px)"};e.classList.contains("reveal-up")&&(t.y=50),gsap.fromTo(e,t,{opacity:1,y:0,scale:1,filter:"blur(0px)",duration:1,ease:"elastic.out(1, 0.6)",delay:1.2*(parseFloat(e.dataset.delay)||0),scrollTrigger:{trigger:e.parentElement,start:"top 88%",toggleActions:"play none none none",once:!0}})});const t=document.querySelector(".contact-form.reveal-up");t&&gsap.fromTo(t,{opacity:1,clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)"},{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:1.2,ease:"power3.inOut",delay:parseFloat(t.dataset.delay)||0,scrollTrigger:{trigger:t,start:"top 90%",toggleActions:"play none none none",once:!0}})}
    function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const i=this.getAttribute("href"),n=document.querySelector(i);if(n){const o=document.querySelector(".nav")?.offsetHeight||60;gsap.to(window,{duration:1.5,scrollTo:{y:n,offsetY:o+20},ease:"power4.inOut"})}})}) }
    function updateCopyrightYear(){const e=document.getElementById("currentYear");e&&(e.textContent=(new Date).getFullYear())}
    document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{t.preventDefault(),alert("TRANSMISSION SENT TO THE VOID... OR PERHAPS JUST A DEMO ALERT.")})});
    console.log("Script execution finished declarations.");
    </script>
</body>
</html>
